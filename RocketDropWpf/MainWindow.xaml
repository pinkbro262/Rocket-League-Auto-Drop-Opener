<Window x:Class="RocketDropWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Rocket League Auto Drop — Opener"
        Width="680" MinHeight="520" SizeToContent="Height"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Icon="Images/AppIcon.ico">

    <!-- Background -->
    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#0E1116" Offset="0"/>
            <GradientStop Color="#0A0D12" Offset="1"/>
        </LinearGradientBrush>
    </Window.Background>

    <!-- ===== Theme (self-contained) ===== -->
    <Window.Resources>
        <!-- Colors -->
        <Color x:Key="Card">#161D27</Color>
        <Color x:Key="CardAlt">#1B2431</Color>
        <Color x:Key="Text">#EAF0F6</Color>
        <Color x:Key="Subtle">#A9B3C5</Color>
        <Color x:Key="Accent">#4CC9F0</Color>
        <Color x:Key="AccentHover">#63D5FA</Color>
        <Color x:Key="Good">#33AA66</Color>
        <Color x:Key="Bad">#C23B3B</Color>

        <!-- Brushes -->
        <SolidColorBrush x:Key="CardBrush" Color="{StaticResource Card}"/>
        <SolidColorBrush x:Key="CardAltBrush" Color="{StaticResource CardAlt}"/>
        <SolidColorBrush x:Key="TextBrush" Color="{StaticResource Text}"/>
        <SolidColorBrush x:Key="SubtleBrush" Color="{StaticResource Subtle}"/>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource Accent}"/>
        <SolidColorBrush x:Key="AccentHoverBrush" Color="{StaticResource AccentHover}"/>
        <SolidColorBrush x:Key="GoodBrush" Color="{StaticResource Good}"/>
        <SolidColorBrush x:Key="BadBrush" Color="{StaticResource Bad}"/>

        <!-- Text -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
        </Style>
        <Style x:Key="Title" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI Semibold"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        </Style>
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI Semibold"/>
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="Foreground" Value="#CFE3F6"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#44000000" BlurRadius="10" ShadowDepth="0"/>
                </Setter.Value>
            </Setter>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
        <Style x:Key="Label" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource SubtleBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <!-- Card -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBrush}"/>
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#99000000" BlurRadius="18" ShadowDepth="2" Opacity="0.35"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox -->
        <Style TargetType="TextBox">
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="Background" Value="{StaticResource CardAltBrush}"/>
            <Setter Property="BorderBrush" Value="#334"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="CaretBrush" Value="{StaticResource TextBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Buttons -->
        <Style TargetType="Button">
            <Setter Property="Foreground" Value="#081018"/>
            <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,12"/>
            <Setter Property="FontFamily" Value="Segoe UI Semibold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}"
                                CornerRadius="12" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="Background" Value="{StaticResource CardAltBrush}"/>
            <Setter Property="BorderBrush" Value="#3A4252"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <!-- ===== Layout ===== -->
    <Grid Margin="18">
        <!-- Main card -->
        <Border Style="{StaticResource CardStyle}">
            <!-- Inner grid so PinkBro kann ÜBER der Card, aber HINTER den Panels liegen -->
            <Grid>
                <!-- PinkBro layer (inside the card) -->
                <Image Source="/Images/pinkRocket.png"
                       Width="222" Height="223"
                       HorizontalAlignment="Right" VerticalAlignment="Top"
                       Margin="0,-79,-9,0"
                       Opacity="1"
                       IsHitTestVisible="False"
                       RenderOptions.BitmapScalingMode="HighQuality"
                       Panel.ZIndex="1" RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="0"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>

                <!-- Content layer (above PinkBro) -->
                <Grid Panel.ZIndex="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <StackPanel>
                        <TextBlock Text="Rocket League Auto Drop Opener" Style="{StaticResource Title}" FontSize="24"/>
                        <TextBlock Foreground="{StaticResource SubtleBrush}" Margin="0,2,0,0"
                                   Text="Fast and clean drop opening automation" FontSize="16"/>
                    </StackPanel>

                    <!-- Auto Drop block (on top of PinkBro) -->
                    <Border Grid.Row="1" Style="{StaticResource CardStyle}" Background="{StaticResource CardAltBrush}"
                            Padding="18" Margin="0,14,0,0" Panel.ZIndex="3">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Auto Drop Features" Style="{StaticResource SectionTitle}" Grid.ColumnSpan="2"/>

                            <!-- Keys (fixed) -->
                            <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,12,0">
                                <TextBlock Text="Start key" Style="{StaticResource Label}"/>
                                <TextBlock Text="F4" Foreground="{StaticResource AccentBrush}" FontSize="16" FontWeight="SemiBold"/>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Margin="12,0,0,0">
                                <TextBlock Text="Stop key" Style="{StaticResource Label}"/>
                                <TextBlock Text="F5" Foreground="{StaticResource AccentBrush}" FontSize="16" FontWeight="SemiBold"/>
                            </StackPanel>

                            <!-- Process + statuses -->
                            <Grid Grid.Row="2" Grid.ColumnSpan="2" Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Left: process -->
                                <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                    <TextBlock Text="Game process" Style="{StaticResource Label}"/>
                                    <DockPanel>
                                        <TextBlock Text="RocketLeague.exe" Foreground="{StaticResource AccentBrush}" Margin="0,2,0,0"/>
                                        <!-- used by code-behind -->
                                        <TextBox x:Name="GameProcBox" Text="RocketLeague.exe" Visibility="Collapsed"/>
                                    </DockPanel>
                                </StackPanel>

                                <!-- Right: statuses (no red dot) -->
                                <StackPanel Grid.Column="1">
                                    <!-- keep StatusBadge hidden so code-behind compiles -->
                                    <Border x:Name="StatusBadge" Width="0" Height="0" Visibility="Collapsed"/>
                                    <TextBlock x:Name="StatusText" Margin="0,0,0,0" VerticalAlignment="Center"
                                               Text="Status: no window found ✖"/>
                                    <TextBlock x:Name="BakkesStatusText" Margin="0,6,0,0" Text="BakkesMod: not running ✖"/>
                                    <TextBlock x:Name="PluginLineText"  Margin="0,2,0,0" Text="Plugin: not found  —  delay ~8 s"/>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Border>

                    <!-- BakkesMod block (also above PinkBro) -->
                    <Border Grid.Row="2" Style="{StaticResource CardStyle}" Background="{StaticResource CardAltBrush}"
                            Padding="18" Margin="0,14,0,0" Panel.ZIndex="3">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="BakkesMod Features" Style="{StaticResource SectionTitle}" Grid.ColumnSpan="2"/>

                            <Button Grid.Row="1" Grid.Column="0" Content="Install / Update BakkesMod"
                                    Width="230" Click="InstallBakkesMod_Click" Margin="0,0,12,0"/>
                            <Button Grid.Row="1" Grid.Column="1" Content="Install / Update Plugin"
                                    Width="210" Click="InstallPlugin_Click" Style="{StaticResource SecondaryButton}"/>
                        </Grid>
                    </Border>

                    <!-- Tips / Info -->
                    <Border Grid.Row="3" Style="{StaticResource CardStyle}" Padding="18" Margin="0,14,0,0">
                        <StackPanel>
                            <TextBlock Text="Quick Tips" Style="{StaticResource Title}" Margin="0,0,0,6"/>
                            <TextBlock Foreground="{StaticResource SubtleBrush}" TextWrapping="Wrap">
                                • Run RocketDrop as Admin for global hotkeys.
                            </TextBlock>
                            <TextBlock Foreground="{StaticResource SubtleBrush}" TextWrapping="Wrap" Margin="0,4,0,0">
                                • For fast opening: <Bold>enter Free Play / Training once</Bold> before you start. Then return to the menu and start the opener.
                            </TextBlock>
                            <TextBlock Foreground="{StaticResource SubtleBrush}" TextWrapping="Wrap" Margin="0,4,0,0">
                                • Place your plugin DLL in <Bold>Assets/Plugins/</Bold> next to RocketDrop.exe. The installer will copy it and patch <Bold>plugins.cfg</Bold>.
                            </TextBlock>

                            <TextBlock HorizontalAlignment="Center" Margin="0,14,0,0"
                                       Foreground="{StaticResource SubtleBrush}" FontSize="12"
                                       Text="Have fun with the drops — PinkBro 🖤"/>
                        </StackPanel>
                    </Border>
                </Grid>
                <Image Source="/Images/pinkbro.png"
                    Width="222" Height="223"
                    HorizontalAlignment="Right" VerticalAlignment="Top"
                    Margin="0,187,185,0"
                    Opacity="1"
                    IsHitTestVisible="False"
                    RenderOptions.BitmapScalingMode="HighQuality"
                    Panel.ZIndex="1" RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="360"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>
            </Grid>
        </Border>
    </Grid>
</Window>